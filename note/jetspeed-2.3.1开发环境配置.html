<html>
<head>
  <title>jetspeed-2.3.1开发环境配置</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4440"/>
<h1>jetspeed-2.3.1开发环境配置</h1>

<div>
<span><div><h3><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 16pt; font-weight: bold;">JetSpeed2.3.1源码编译环境搭建</span></h3><h4><span style="font-family: '等线 Light'; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">开发环境</span></h4><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">JDK 1.8</span></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">Maven 3.5</span></li><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">Tomcat 7</span></li></ol><div style="margin: 4.93mm 0mm 5.1mm; text-indent: 0mm; line-height: 157%;"><span style="text-indent: 0mm; line-height: 157%; font-family: '等线 Light'; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">下载源码：</span></div><div style="min-height: 15pt;"><a href="http://portals.apache.org/jetspeed-2/download.html" style="min-height: 15pt; font-family: ����; color: rgb(5, 99, 193); font-size: 10pt; text-decoration: underline;">http://portals.apache.org/jetspeed-2/download.html</a></div><h4><span style="font-family: '等线 Light'; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">环境配置</span></h4><h5><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">Tomcat配置</span></h5><ol style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">/conf/server.xml</span></li></ol><div style="margin-left: 7mm; margin-right: 0mm; text-indent: 0mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 0mm; min-height: 15pt; font-family: 等线; color: rgb(1, 1, 1); font-size: 10pt;">在8080端口配置标签中添加emptySessionPath=&quot;true&quot;属性。</span></div><ol start="2" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">/conf/context.xml</span></li></ol><div style="margin-left: 7mm; margin-right: 0mm; text-indent: 0mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 0mm; min-height: 15pt; font-family: 等线; color: rgb(1, 1, 1); font-size: 10pt;">解开&lt;Manager pathname=&quot;&quot; /&gt;注释。</span></div><ol start="3" style="margin-top: 0mm; margin-bottom: 0mm; margin-left: 0mm; padding-left: 0pt;"><li style="margin-left: 15pt; margin-right: 0pt; padding-left: 3pt; text-indent:0pt; font-family: ����; font-size: 10pt; color: #010101;"><span style="min-height: 15pt; font-family: ����; color: #010101; font-size: 10pt; font-decoration: Normal;">/conf/tomcat-user.xml</span></li></ol><div style="margin-left: 7mm; margin-right: 0mm; text-indent: 0mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 0mm; min-height: 15pt; font-family: 等线; color: rgb(1, 1, 1); font-size: 10pt;">添加如下用户和角色：</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 7mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 7mm; min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;role rolename=&quot;manager-gui&quot;/&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 7mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 7mm; min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;role rolename=&quot;manager-script&quot;/&gt;</span></div><div style="margin-left: 7mm; margin-right: 0mm; text-indent: 0mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 0mm; min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;manager-script,manager-gui&quot;/&gt;</span></div><h5><span style="font-family: ����; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">Maven配置</span></h5><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 7mm; margin-top: 0.00mm; margin-bottom: 0.00mm; min-height: 15pt;"><span style="text-indent: 7mm; min-height: 15pt; font-family: 等线; color: rgb(1, 1, 1); font-size: 10pt;">在/.m2/、自定义maven仓库同级目录\(如存在)位置添加setting.xml文件，内容如下：</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">&lt;settings xmlns=&quot;<a href="http://maven.apache.org/POM/4.0.0%22%3E">http://maven.apache.org/POM/4.0.0&quot;&gt;</a>;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">  &lt;pluginGroups&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">    &lt;pluginGroup&gt;org.apache.portals.jetspeed-2&lt;/pluginGroup&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">  &lt;/pluginGroups&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; font-size: 10pt;">&lt;/settings&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">       将maven的bin目录下的mvn.cmd拷贝一份至同目录下，修改文件名和扩展名为mvn.bat。</span></div><h5><span style="font-family: 等线; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">源码配置</span></h5><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;settings xmlns=&quot;<a href="http://maven.apache.org/POM/4.0.0%22%3E">http://maven.apache.org/POM/4.0.0&quot;&gt;</a>;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">  &lt;profiles&gt;   </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;profile&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;id&gt;jetspeed-mvn-settings&lt;/id&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;activation&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;       </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;/activation&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;properties&gt;       </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;!-- Your Tomcat Installation Path --&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">              &lt;org.apache.jetspeed.server.home&gt;D:\apache-tomcat-8.5.16-jetspeed\&lt;/org.apache.jetspeed.server.home&gt;          &lt;org.apache.jetspeed.catalina.version.major&gt;7&lt;/org.apache.jetspeed.catalina.version.major&gt;       </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!-- Production jdbc driver artifact properties --&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.jdbc.driver.groupId&gt;mysql&lt;/org.apache.jetspeed.production.jdbc.driver.groupId&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.jdbc.driver.artifactId&gt;mysql-connector-java&lt;/org.apache.jetspeed.production.jdbc.driver.artifactId&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.jdbc.driver.version&gt;5.1.6&lt;/org.apache.jetspeed.production.jdbc.driver.version&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;!-- Production database name, JDBC url, JDBC driver name and connection information --&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.database.default.name&gt;mysql&lt;/org.apache.jetspeed.production.database.default.name&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.database.url&gt;jdbc:mysql://localhost:3306/j2test&lt;/org.apache.jetspeed.production.database.url&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.database.driver&gt;com.mysql.jdbc.Driver&lt;/org.apache.jetspeed.production.database.driver&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.database.user&gt;root&lt;/org.apache.jetspeed.production.database.user&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;org.apache.jetspeed.production.database.password&gt;root&lt;/org.apache.jetspeed.production.database.password&gt;       </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;/properties&gt;</span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">    &lt;/profile&gt;   </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">  &lt;/profiles&gt; </span></div><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/settings&gt;</span></div><h4><span style="font-family: '���� Light'; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">Maven命令</span></h4><h5><span style="font-family: 等线; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">清空maven缓存</span></h5><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">mvn clean</span></div><h5><span style="font-family: 等线; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">安装依赖包</span></h5><div style="min-height: 15pt;"><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">mvn install</span></div><h5><span style="font-family: 等线; color: rgb(1, 1, 1); font-size: 14pt; font-weight: bold;">编译打包源码</span></h5><div><span style="min-height: 15pt; font-family: ����; color: rgb(1, 1, 1); font-size: 10pt;">mvn</span> <span style="min-height: 15pt; font-family: DengXian; color: rgb(1, 1, 1); font-size: 10pt;">jetspeed:mvn –Dtarget=demo</span></div></div></span>
</div></body></html> 