<html>
<head>
  <title>spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="646"/>
<h1>spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html</h1>

<div>
<span><div><ul><li><a href="https://www.oschina.net/">首页</a></li><li><a href="https://www.oschina.net/project">开源项目</a><ul><li><a href="https://www.oschina.net/project/zh">国产开源项目</a></li><li><a href="https://www.oschina.net/project/tags">项目分类</a></li><li><a href="https://www.oschina.net/project/list?sort=time">最新收录项目</a></li><li><a href="https://www.oschina.net/project/lang/19/java">Java 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/25/python">Python 开源软件</a></li><li><a href="https://www.oschina.net/project/lang/358/go">Go开源软件</a></li><li><a href="https://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li></ul></li><li><a href="https://www.oschina.net/question">问答</a><ul><li><a href="https://www.oschina.net/question?catalog=1">技术问答 »</a></li><li><a href="https://www.oschina.net/question?catalog=2">技术分享 »</a></li><li><a href="https://www.oschina.net/question?catalog=3">IT大杂烩 »</a></li><li><a href="https://www.oschina.net/question?catalog=100">职业生涯 »</a></li><li><a href="https://www.oschina.net/question?catalog=4">站务/建议 »</a></li><li><a href="https://www.oschina.net/alipay">支付宝专区 »</a></li><li><a href="https://www.oschina.net/mopaas">MoPaaS专区 »</a></li><li><a href="https://www.oschina.net/hardware">开源硬件专区 »</a></li></ul></li><li><a href="https://www.oschina.net/tweets">动弹</a></li><li><a href="https://www.oschina.net/blog">博客</a></li><li><a href="https://www.oschina.net/translate">翻译</a></li><li><a href="https://www.oschina.net/news">资讯</a></li><li><a href="https://www.oschina.net/android">专题</a><ul><li><a href="https://www.oschina.net/events" style="color:#c00">源创会</a> <a href="http://www.oschina.net/video">视频</a></li><li><a href="http://www.oschina.net/question/tag/高手问答">高手问答</a> <a href="http://www.oschina.net/question/tag/开源访谈">访谈</a></li><li><a href="http://www.oschina.net/question/tag/开源周刊">周刊</a> <a href="http://my.oschina.net/xxiaobian/blog?catalog=547834">乱弹</a></li><li><a href="https://www.oschina.net/company">公司开源导航页</a></li><li><a href="https://www.oschina.net/android">Android开发专区</a></li><li><a href="https://www.oschina.net/ios/home">iOS开发专区</a></li><li><a href="https://www.oschina.net/ios/codingList">iOS代码库</a></li><li><a href="https://www.oschina.net/wp">Windows Phone</a></li></ul></li><li><a href="https://city.oschina.net/" title="城市圈">城市圈</a></li></ul></div><div>当前访客身份：游客 [ <a href="https://www.oschina.net/home/login?goto_page=http://www.oschina.net/code/snippet_733736_37996">登录</a> | <a href="https://www.oschina.net/home/reg">加入开源中国</a> ]</div><div><a href="https://www.oschina.net/" title="OSChina 开源中国">开源中国</a><h1><a href="http://www.oschina.net/code/list">代码分享</a></h1><dl><dt>当前位置：</dt><dd><a href="http://www.oschina.net/code/list">代码分享</a> » <a href="http://www.oschina.net/code/list/?lang=java">Java</a>  » <a href="http://www.oschina.net/code/list/?catalog=commonly-used-tool">常用工具方法</a></dd></dl></div><div><a href="https://my.oschina.net/aps" target="_blank"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" alt="土豆-地瓜" style="height: auto;" title="土豆-地瓜"/></a></div><div><h1><a href="https://www.oschina.net/code/snippet_733736_37996">spring和mybatis的高效率整合。不用写别名。</a></h1><div><a href="https://my.oschina.net/aps">土豆-地瓜</a> 发布于 2014年08月12日 20时, <a href="#comments">30评/16248阅</a></div></div><div><b>分享到： </b></div><div><a href="#"></a><a href="#" title="分享到新浪微博"></a><a href="#" title="分享到腾讯微博"></a><a href="#" title="分享到QQ空间"></a><a href="#" title="分享到微信"></a><a href="#" title="分享到QQ好友"></a></div><div><a title="收藏此代码">收藏</a> +115</div><div><a title="踩：这代码不知道在说什么，或者没什么用">踩</a> <a title="顶：这代码很有用或者很清晰明了">顶</a> 3</div><div>spring和mybatis整合，mybatis不用再引入根文件，直接通过spring的注解扫描来实现。<br/><br/>
这些配置文件，我都是放在src下面的。</div><div><strong>标签：</strong> &lt;无&gt;</div><div><div><h2><a>代码片段<em>(11)</em></a> <i><a href="http://www.oschina.net/code/piece_full?code=37996" target="_blank">[全屏查看所有代码]</a></i></h2><div><h3><i>1. </i><i>[代码]</i>spring-jdbc.properties     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56141#56141" name="56141" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div></td><td><div><code>db.driver=com.mysql.jdbc.Driver</code></div><div><code>db.url=jdbc:mysql:</code><code>//localhost:3306/student_manager</code></div><div><code>bd.userName=root</code></div><div><code>db.password=root</code></div></td></tr></tbody></table></div></div><div><h3><i>2. </i><i>[代码]</i>ApplicationContext.xml     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56142#56142" name="56142" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div></td><td><div><code>&lt;?xml version=</code><code>&quot;1.0&quot;</code> <code>encoding=</code><code>&quot;UTF-8&quot;</code><code>?&gt;</code></div><div><code>&lt;beans xmlns=</code><code>&quot;http://www.springframework.org/schema/beans&quot;</code></div><div><code>    </code><code>xmlns:xsi=</code><code>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</code> <code>xmlns:p=</code><code>&quot;http://www.springframework.org/schema/p&quot;</code></div><div><code>    </code><code>xmlns:context=</code><code>&quot;http://www.springframework.org/schema/context&quot;</code> <code>xmlns:tx=</code><code>&quot;http://www.springframework.org/schema/tx&quot;</code></div><div><code>    </code><code>xmlns:aop=</code><code>&quot;http://www.springframework.org/schema/aop&quot;</code></div><div><code>    </code><code>xsi:schemaLocation=&quot;http:</code><code>//www.springframework.org/schema/beans</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/beans/spring-beans-3.0.xsd</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/context</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/context/spring-context-3.0.xsd</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/tx</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/tx/spring-tx.xsd</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/aop</code></div><div><code>        </code><code>http:</code><code>//www.springframework.org/schema/aop/spring-aop-3.0.xsd</code></div><div><code>    </code><code>&quot;&gt;</code></div><div> </div><div><code>    </code><code>&lt;context:property-placeholder location=</code><code>&quot;classpath:spring-jdbc.properties&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;!-- 配置数据源 --&gt;</code></div><div><code>    </code><code>&lt;bean id=</code><code>&quot;dataSource&quot;</code> <code>class</code><code>=</code><code>&quot;org.apache.commons.dbcp.BasicDataSource&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;driverClassName&quot;</code> <code>value=</code><code>&quot;${db.driver}&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;url&quot;</code> <code>value=</code><code>&quot;${db.url}&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;username&quot;</code> <code>value=</code><code>&quot;${bd.userName}&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;password&quot;</code> <code>value=</code><code>&quot;${db.password}&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;maxActive&quot;</code> <code>value=</code><code>&quot;100&quot;</code><code>&gt;&lt;/property&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;maxIdle&quot;</code> <code>value=</code><code>&quot;30&quot;</code><code>&gt;&lt;/property&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;maxWait&quot;</code> <code>value=</code><code>&quot;500&quot;</code><code>&gt;&lt;/property&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;defaultAutoCommit&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>&gt;&lt;/property&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div><code>    </code><code>&lt;bean id=</code><code>&quot;sqlSessionFactory&quot;</code> <code>class</code><code>=</code><code>&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;configLocation&quot;</code> <code>value=</code><code>&quot;classpath:mybatis-config.xml&quot;</code><code>&gt;&lt;/property&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;dataSource&quot;</code> <code>ref=</code><code>&quot;dataSource&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;mapperLocations&quot;</code> <code>value=</code><code>&quot;classpath*:com/asgard/**/mapper/*.xml&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div> </div><div><code>    </code><code>&lt;bean id=</code><code>&quot;messageSource&quot;</code></div><div><code>        </code><code>class</code><code>=</code><code>&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;basenames&quot;</code><code>&gt;</code></div><div><code>            </code><code>&lt;list&gt;</code></div><div><code>                </code><code>&lt;value&gt;ApplicationResources&lt;/value&gt;</code></div><div><code>            </code><code>&lt;/list&gt;</code></div><div><code>        </code><code>&lt;/property&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;useCodeAsDefaultMessage&quot;</code> <code>value=</code><code>&quot;true&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div> </div><div><code>    </code><code>&lt;bean</code> <code>class</code><code>=</code><code>&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;annotationClass&quot;</code> <code>value=</code><code>&quot;org.springframework.stereotype.Repository&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;basePackage&quot;</code> <code>value=</code><code>&quot;com.asgard&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div> </div><div> </div><div><code>    </code><code>&lt;bean id=</code><code>&quot;sqlSession&quot;</code> <code>class</code><code>=</code><code>&quot;org.mybatis.spring.SqlSessionTemplate&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;constructor-arg index=</code><code>&quot;0&quot;</code> <code>ref=</code><code>&quot;sqlSessionFactory&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div><code>    </code><code>&lt;!-- 事务管理 --&gt;</code></div><div><code>    </code><code>&lt;bean id=</code><code>&quot;transactionManager&quot;</code></div><div><code>        </code><code>class</code><code>=</code><code>&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;property name=</code><code>&quot;dataSource&quot;</code> <code>ref=</code><code>&quot;dataSource&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/bean&gt;</code></div><div> </div><div><code>    </code><code>&lt;!-- 事务注解支持 --&gt;</code></div><div><code>    </code><code>&lt;tx:annotation-driven transaction-manager=</code><code>&quot;transactionManager&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;!-- 扫描注解文件 --&gt;</code></div><div><code>    </code><code>&lt;context:component-scan base-</code><code>package</code><code>=</code><code>&quot;com.asgard&quot;</code> <code>/&gt;</code></div><div> </div><div><code>    </code> </div><div><code>&lt;/beans&gt;</code></div></td></tr></tbody></table></div></div><div><h3><i>3. </i><i>[代码]</i>mybatis-config.xml     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56143#56143" name="56143" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div></td><td><div><code>&lt;?xml version=</code><code>&quot;1.0&quot;</code> <code>encoding=</code><code>&quot;UTF-8&quot;</code><code>?&gt;</code></div><div><code>&lt;!DOCTYPE configuration  </code></div><div><code>    </code><code>PUBLIC</code> <code>&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</code>  </div><div><code>    </code><code>&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</code><code>&gt; </code></div><div><code>&lt;configuration&gt;</code></div><div><code>    </code><code>&lt;settings&gt;</code></div><div><code>        </code><code>&lt;setting name=</code><code>&quot;cacheEnabled&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>/&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;enhancementEnabled&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>/&gt; --&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;lazyLoadingEnabled&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>/&gt; --&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;maxRequests&quot;</code> <code>value=</code><code>&quot;32&quot;</code><code>/&gt; --&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;maxSessions&quot;</code> <code>value=</code><code>&quot;10&quot;</code><code>/&gt; --&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;maxTransactions&quot;</code> <code>value=</code><code>&quot;5&quot;</code><code>/&gt; --&gt;</code></div><div><code>&lt;!--         &lt;setting name=</code><code>&quot;useStatementNamespaces&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>/&gt; --&gt;</code></div><div><code>    </code> </div><div><code>&lt;!--     &lt;setting name=</code><code>&quot;lazyLoadingEnabled&quot;</code> <code>value=</code><code>&quot;true&quot;</code><code>/&gt;--&gt;</code></div><div><code>&lt;!--     &lt;setting name=</code><code>&quot;aggressiveLazyLoading&quot;</code> <code>value=</code><code>&quot;false&quot;</code><code>/&gt;--&gt;</code></div><div><code>    </code><code>&lt;/settings&gt;</code></div><div><code>     </code> </div><div><code>     </code><code>&lt;!-- 别名</code></div><div><code>    </code><code>&lt;typeAliases&gt;</code></div><div><code>        </code><code>&lt;typeAlias type=</code><code>&quot;com.asgard.bms.business.model.Person&quot;</code> <code>alias=</code><code>&quot;PersonAlias&quot;</code><code>/&gt;</code></div><div><code>    </code><code>&lt;/typeAliases&gt;</code></div><div><code>     </code><code>--&gt;</code></div><div><code>    </code> </div><div><code>    </code> </div><div><code>    </code><code>&lt;!--</code></div><div><code>    </code><code>指定数据库分页方言Dialect, 其它方言:OracleDialect,SQLServerDialect,SybaseDialect,DB2Dialect,PostgreSQLDialect,MySQLDialect,DerbyDialect</code></div><div><code>   </code> </div><div><code>    </code><code>&lt;plugins&gt; </code></div><div><code>        </code><code>&lt;plugin interceptor=</code><code>&quot;com.asgard.cfap.plugin.dialect.interceptor.OffsetLimitInterceptor&quot;</code><code>&gt; </code></div><div><code>            </code><code>&lt;property name=</code><code>&quot;dialectClass&quot;</code> <code>value=</code><code>&quot;com.asgard.cfap.plugin.dialect.MySQLDialect&quot;</code><code>/&gt; </code></div><div><code>        </code><code>&lt;/plugin&gt; </code></div><div><code>    </code><code>&lt;/plugins&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;mappers&gt;</code></div><div><code>        </code><code>&lt;mapper resource=</code><code>&quot;com.asgard.bms.business.mapper.PersonMapper.xml&quot;</code><code>/&gt;</code></div><div><code>    </code><code>&lt;/mappers&gt;</code></div><div><code>     </code><code>--&gt;</code></div><div><code>&lt;/configuration&gt;</code></div></td></tr></tbody></table></div></div><div><h3><i>4. </i><i>[代码]</i>log4j.properties     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56144#56144" name="56144" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div></td><td><div><code>log4j.appender.stdout=org.apache.log4j.ConsoleAppender</code></div><div><code>log4j.appender.stdout.Target=System.out</code></div><div><code>log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</code></div><div><code>log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %m%l%n</code></div><div> </div><div><code>log4j.appender.file=org.apache.log4j.FileAppender</code></div><div><code>log4j.appender.file.File=realware.log</code></div><div><code>log4j.appender.file.layout=org.apache.log4j.PatternLayout</code></div><div><code>log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %l%m%n</code></div><div> </div><div><code>log4j.rootLogger=info,stdout,file</code></div></td></tr></tbody></table></div></div><div><h3><i>5. </i><i>[代码]</i>log4j.xml     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56145#56145" name="56145" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div></td><td><div><code>&lt;?xml version=</code><code>&quot;1.0&quot;</code> <code>encoding=</code><code>&quot;UTF-8&quot;</code><code>?&gt;</code></div><div><code>&lt;!DOCTYPE log4j:configuration SYSTEM</code> <code>&quot;log4j.dtd&quot;</code><code>&gt;</code></div><div><code>&lt;log4j:configuration xmlns:log4j=</code><code>&quot;http://jakarta.apache.org/log4j/&quot;</code> <code>debug=</code><code>&quot;false&quot;</code><code>&gt;</code></div><div><code>    </code><code>&lt;appender name=</code><code>&quot;CONSOLE&quot;</code> <code>class</code><code>=</code><code>&quot;org.apache.log4j.ConsoleAppender&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;layout</code> <code>class</code><code>=</code><code>&quot;org.apache.log4j.PatternLayout&quot;</code><code>&gt;</code></div><div><code>            </code><code>&lt;param name=</code><code>&quot;ConversionPattern&quot;</code> <code>value=</code><code>&quot;[%d{dd/MM/yy hh:mm:ss:sss z}] %5p %c{2}: %m%n&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;/layout&gt;</code></div><div><code>    </code><code>&lt;/appender&gt;</code></div><div><code>    </code><code>&lt;appender name=</code><code>&quot;FILE&quot;</code> <code>class</code><code>=</code><code>&quot;org.apache.log4j.RollingFileAppender&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;param name=</code><code>&quot;file&quot;</code> <code>value=</code><code>&quot;${user.home}/foss-framework.log&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;param name=</code><code>&quot;append&quot;</code> <code>value=</code><code>&quot;true&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;param name=</code><code>&quot;maxFileSize&quot;</code> <code>value=</code><code>&quot;10MB&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;param name=</code><code>&quot;maxBackupIndex&quot;</code> <code>value=</code><code>&quot;100&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;layout</code> <code>class</code><code>=</code><code>&quot;org.apache.log4j.PatternLayout&quot;</code><code>&gt;</code></div><div><code>            </code><code>&lt;param name=</code><code>&quot;ConversionPattern&quot;</code> <code>value=</code><code>&quot;%d [%t] %-5p %C{6} (%F:%L) - %m%n&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;/layout&gt;</code></div><div><code>    </code><code>&lt;/appender&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;!-- 打印myBatis的sql语句 --&gt;</code></div><div><code>    </code><code>&lt;category name=</code><code>&quot;java.sql&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;priority value=</code><code>&quot;debug&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/category&gt;</code></div><div><code>    </code><code>&lt;category name=</code><code>&quot;META-INF.ibatis&quot;</code><code>&gt;</code></div><div><code>        </code><code>&lt;priority value=</code><code>&quot;error&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/category&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;root&gt;</code></div><div><code>        </code><code>&lt;level value=</code><code>&quot;error&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;appender-ref ref=</code><code>&quot;CONSOLE&quot;</code> <code>/&gt;</code></div><div><code>        </code><code>&lt;appender-ref ref=</code><code>&quot;FILE&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;/root&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;!-- &lt;root&gt;   </code></div><div><code>        </code><code>&lt;priority value =</code><code>&quot;error&quot;</code> <code>/&gt;   </code></div><div><code>        </code><code>&lt;appender-ref ref=</code><code>&quot;FILE&quot;</code> <code>/&gt;   </code></div><div><code>    </code><code>&lt;/root&gt;  --&gt;</code></div><div><code>    </code> </div><div><code>&lt;/log4j:configuration&gt;</code></div></td></tr></tbody></table></div></div><div><h3><i>6. </i><i>[代码]</i>BaseDAO     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56146#56146" name="56146" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div><div>73</div><div>74</div><div>75</div><div>76</div><div>77</div><div>78</div><div>79</div><div>80</div><div>81</div><div>82</div><div>83</div><div>84</div><div>85</div><div>86</div><div>87</div><div>88</div><div>89</div><div>90</div><div>91</div><div>92</div><div>93</div><div>94</div><div>95</div><div>96</div><div>97</div><div>98</div><div>99</div><div>100</div><div>101</div><div>102</div><div>103</div><div>104</div><div>105</div><div>106</div><div>107</div><div>108</div><div>109</div><div>110</div><div>111</div><div>112</div><div>113</div><div>114</div><div>115</div><div>116</div><div>117</div><div>118</div><div>119</div><div>120</div><div>121</div><div>122</div><div>123</div><div>124</div><div>125</div><div>126</div><div>127</div><div>128</div><div>129</div><div>130</div><div>131</div><div>132</div><div>133</div><div>134</div><div>135</div><div>136</div><div>137</div><div>138</div><div>139</div><div>140</div><div>141</div><div>142</div><div>143</div><div>144</div><div>145</div><div>146</div><div>147</div><div>148</div><div>149</div><div>150</div><div>151</div><div>152</div><div>153</div><div>154</div><div>155</div><div>156</div><div>157</div><div>158</div><div>159</div><div>160</div><div>161</div><div>162</div><div>163</div><div>164</div><div>165</div><div>166</div><div>167</div><div>168</div><div>169</div><div>170</div><div>171</div><div>172</div><div>173</div><div>174</div><div>175</div><div>176</div><div>177</div><div>178</div><div>179</div><div>180</div><div>181</div><div>182</div><div>183</div><div>184</div><div>185</div><div>186</div><div>187</div><div>188</div><div>189</div><div>190</div><div>191</div><div>192</div><div>193</div><div>194</div><div>195</div><div>196</div><div>197</div><div>198</div><div>199</div><div>200</div><div>201</div><div>202</div><div>203</div><div>204</div><div>205</div><div>206</div></td><td><div><code>package</code> <code>com.asgard.bms.business.base;</code></div><div> </div><div><code>import</code> <code>java.util.List;</code></div><div><code>import</code> <code>java.util.Map;</code></div><div> </div><div><code>import</code> <code>org.apache.ibatis.session.ExecutorType;</code></div><div><code>import</code> <code>org.apache.ibatis.session.ResultHandler;</code></div><div><code>import</code> <code>org.apache.ibatis.session.RowBounds;</code></div><div><code>import</code> <code>org.apache.ibatis.session.SqlSession;</code></div><div><code>import</code> <code>org.apache.log4j.Logger;</code></div><div><code>import</code> <code>org.mybatis.spring.SqlSessionTemplate;</code></div><div><code>import</code> <code>org.mybatis.spring.support.SqlSessionDaoSupport;</code></div><div><code>import</code> <code>org.springframework.beans.factory.annotation.Autowired;</code></div><div><code>import</code> <code>org.springframework.dao.DataAccessException;</code></div><div><code>import</code> <code>org.springframework.stereotype.Repository;</code></div><div> </div><div><code>//import com.ibatis.sqlmap.client.SqlMapExecutor;</code></div><div> </div><div><code>/**</code></div><div><code> </code><code>*</code></div><div><code> </code><code>*</code></div><div><code> </code><code>*/</code></div><div><code>@Repository</code></div><div><code>public</code> <code>class</code> <code>BaseDAO</code> <code>extends</code> <code>SqlSessionDaoSupport {</code></div><div><code>    </code><code>private</code> <code>Logger log4j = Logger.getLogger(BaseDAO.</code><code>class</code><code>);</code></div><div><code>    </code> </div><div><code>    </code><code>//从spring注入原有的sqlSessionTemplate</code></div><div><code>    </code><code>@Autowired</code></div><div><code>    </code><code>private</code> <code>SqlSessionTemplate sqlSessionTemplate;</code></div><div> </div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>&lt;T&gt; List&lt;T&gt; selectList(String sqlid, Object paramObj) {</code></div><div><code>        </code><code>return</code> <code>(List&lt;T&gt;)</code> <code>this</code><code>.getSqlSession().selectList(sqlid, paramObj);</code></div><div><code>    </code><code>}</code></div><div> </div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>&lt;T&gt; List&lt;T&gt; selectList(String sqlid) {</code></div><div><code>        </code><code>return</code> <code>(List&lt;T&gt;)</code> <code>this</code><code>.getSqlSession().selectList(sqlid);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>&lt;T&gt; List&lt;T&gt; selectList(String sqlid,Object paramObj,RowBounds arg3) {</code></div><div><code>        </code><code>return</code> <code>(List&lt;T&gt;)</code> <code>this</code><code>.getSqlSession().selectList(sqlid, paramObj, arg3);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>&lt;T&gt; T selectOne(String sqlid) {</code></div><div><code>        </code><code>return</code> <code>(T)</code> <code>this</code><code>.getSqlSession().selectOne(sqlid);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>&lt;T&gt; T selectOne(String sqlid, Object paramObj) {</code></div><div><code>        </code><code>return</code> <code>(T)</code> <code>this</code><code>.getSqlSession().selectOne(sqlid, paramObj);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>Map selectMap(String arg0,String arg1) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().selectMap(arg0, arg1);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>Map selectMap(String arg0,Object arg1,String arg2) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().selectMap(arg0, arg1, arg2);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>@SuppressWarnings</code><code>(</code><code>&quot;unchecked&quot;</code><code>)</code></div><div><code>    </code><code>public</code> <code>Map selectMap(String arg0,Object arg1,String arg2,RowBounds arg3) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().selectMap(arg0, arg1, arg2, arg3);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>int</code> <code>delete(String sqlid) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().delete(sqlid);</code></div><div><code>    </code><code>}</code></div><div><code>    </code> </div><div><code>    </code><code>public</code> <code>int</code> <code>delete(String sqlid,Object paramObj) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().delete(sqlid, paramObj);</code></div><div><code>    </code><code>}</code></div><div><code>    </code> </div><div><code>    </code><code>public</code> <code>int</code> <code>insert(String sqlid,Object paramObj) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().insert(sqlid, paramObj);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>int</code> <code>insert(String sqlid) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().insert(sqlid);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>void</code> <code>select(String sqlid,ResultHandler arg1) {</code></div><div><code>        </code><code>this</code><code>.getSqlSession().select(sqlid, arg1);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>void</code> <code>select(String sqlid,Object paramObj,ResultHandler arg1) {</code></div><div><code>        </code><code>this</code><code>.getSqlSession().select(sqlid, paramObj,arg1);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>void</code> <code>select(String sqlid,Object paramObj,RowBounds arg3,ResultHandler arg1) {</code></div><div><code>        </code><code>this</code><code>.getSqlSession().select(sqlid,paramObj,arg3, arg1);</code></div><div><code>    </code><code>}</code></div><div><code>    </code> </div><div><code>    </code><code>public</code> <code>int</code> <code>update(String sqlid,Object paramObj) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().update(sqlid, paramObj);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>public</code> <code>int</code> <code>update(String sqlid) {</code></div><div><code>        </code><code>return</code> <code>this</code><code>.getSqlSession().update(sqlid);</code></div><div><code>    </code><code>}</code></div><div> </div><div><code>    </code><code>/**</code></div><div><code>     </code><code>* 批量更新</code></div><div><code>     </code><code>* 方法描述：批量更新（效率没有在配置文件上的高）</code></div><div><code>     </code><code>* @param statementName</code></div><div><code>     </code><code>* @param list</code></div><div><code>     </code><code>* @throws DataAccessException</code></div><div><code>     </code><code>* @author anps</code></div><div><code>     </code><code>* @date 2013-4-3 上午11:14:37</code></div><div><code>     </code><code>* @comment</code></div><div><code>     </code><code>*/</code></div><div><code>    </code><code>public</code> <code>void</code> <code>batchUpdate(</code><code>final</code> <code>String statementName,</code> <code>final</code> <code>List list) </code> <code>throws</code> <code>DataAccessException{</code></div><div><code>        </code><code>SqlSession session = sqlSessionTemplate.getSqlSessionFactory().openSession(ExecutorType.BATCH,</code> <code>false</code><code>);</code></div><div><code>        </code><code>try</code><code>{</code></div><div><code>            </code><code>if</code><code>(</code><code>null</code> <code>!= list || list.size() &gt;</code> <code>0</code><code>){</code></div><div><code>                </code><code>int</code> <code>size =</code> <code>10000</code><code>;</code></div><div><code>            </code> </div><div><code>                </code><code>for</code> <code>(</code><code>int</code> <code>i =</code> <code>0</code><code>, n = list.size(); i &lt; n; i++) {</code></div><div><code>                    </code><code>this</code><code>.update(statementName, list.get(i));</code></div><div><code>                    </code><code>if</code> <code>(i %</code> <code>1000</code> <code>==</code> <code>0</code> <code>|| i == size -</code> <code>1</code><code>) {</code></div><div><code>                        </code><code>//手动每1000个一提交，提交后无法回滚</code></div><div><code>                        </code><code>session.commit();</code></div><div><code>                        </code><code>//清理缓存，防止溢出</code></div><div><code>                        </code><code>session.clearCache();</code></div><div><code>                    </code><code>}</code></div><div><code>                </code><code>}</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code><code>catch</code> <code>(Exception e){</code></div><div><code>            </code><code>session.rollback();</code></div><div><code>            </code><code>if</code> <code>(log4j.isDebugEnabled()) {</code></div><div><code>                </code><code>e.printStackTrace();</code></div><div><code>                </code><code>log4j.debug(</code><code>&quot;batchUpdate error: id [&quot;</code> <code>+ statementName +</code> <code>&quot;], parameterObject [&quot;</code> <code>+ list +</code> <code>&quot;].  Cause: &quot;</code> <code>+ e.getMessage());</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code> <code>finally</code> <code>{</code></div><div><code>            </code><code>session.close();</code></div><div><code>        </code><code>}</code></div><div><code>    </code><code>}</code></div><div><code>    </code> </div><div><code>    </code><code>/**</code></div><div><code>     </code><code>* 批量插入</code></div><div><code>     </code><code>* 方法描述：批量插入（效率没有在配置文件上的高）</code></div><div><code>     </code><code>* @param statementName</code></div><div><code>     </code><code>* @param list</code></div><div><code>     </code><code>* @throws DataAccessException</code></div><div><code>     </code><code>* @author anps</code></div><div><code>     </code><code>* @date 2013-4-3 上午11:27:39</code></div><div><code>     </code><code>* @comment</code></div><div><code>     </code><code>*/</code></div><div><code>    </code><code>public</code> <code>void</code> <code>batchInsert(</code><code>final</code> <code>String statementName,</code> <code>final</code> <code>List list) </code> <code>throws</code> <code>DataAccessException{</code></div><div> </div><div><code>        </code><code>SqlSession session = sqlSessionTemplate.getSqlSessionFactory().openSession(ExecutorType.BATCH,</code> <code>false</code><code>);</code></div><div><code>        </code> </div><div><code>        </code><code>int</code> <code>size =</code> <code>10000</code><code>;</code></div><div><code>        </code><code>try</code><code>{</code></div><div><code>            </code><code>if</code><code>(</code><code>null</code> <code>!= list || list.size() &gt;</code> <code>0</code><code>){</code></div><div><code>                </code><code>for</code> <code>(</code><code>int</code> <code>i =</code> <code>0</code><code>, n = list.size(); i &lt; n; i++) {</code></div><div><code>                    </code><code>this</code><code>.insert(statementName, list.get(i));</code></div><div><code>                    </code><code>if</code> <code>(i %</code> <code>1000</code> <code>==</code> <code>0</code> <code>|| i == size -</code> <code>1</code><code>) {</code></div><div><code>                        </code><code>//手动每1000个一提交，提交后无法回滚</code></div><div><code>                        </code><code>session.commit();</code></div><div><code>                        </code><code>//清理缓存，防止溢出</code></div><div><code>                        </code><code>session.clearCache();</code></div><div><code>                    </code><code>}</code></div><div><code>                </code><code>}</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code><code>catch</code> <code>(Exception e){</code></div><div><code>            </code><code>session.rollback();</code></div><div><code>            </code><code>if</code> <code>(log4j.isDebugEnabled()) {</code></div><div><code>                </code><code>e.printStackTrace();</code></div><div><code>                </code><code>log4j.debug(</code><code>&quot;batchInsert error: id [&quot;</code> <code>+ statementName +</code> <code>&quot;], parameterObject [&quot;</code> <code>+ list +</code> <code>&quot;].  Cause: &quot;</code> <code>+ e.getMessage());</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code> <code>finally</code> <code>{</code></div><div><code>            </code><code>session.close();</code></div><div><code>        </code><code>}</code></div><div><code>    </code><code>}</code></div><div> </div><div><code>    </code><code>/**</code></div><div><code>     </code><code>* 批量删除</code></div><div><code>     </code><code>* 方法描述：批量删除（效率没有在配置文件上的高）</code></div><div><code>     </code><code>* @param statementName</code></div><div><code>     </code><code>* @param list</code></div><div><code>     </code><code>* @throws DataAccessException</code></div><div><code>     </code><code>* @author anps</code></div><div><code>     </code><code>* @date 2013-4-3 上午11:29:53</code></div><div><code>     </code><code>* @comment</code></div><div><code>     </code><code>*/</code></div><div><code>    </code><code>public</code> <code>void</code> <code>batchDelete(</code><code>final</code> <code>String statementName,</code> <code>final</code> <code>List list) </code> <code>throws</code> <code>DataAccessException{</code></div><div><code>        </code><code>SqlSession session = sqlSessionTemplate.getSqlSessionFactory().openSession(ExecutorType.BATCH,</code> <code>false</code><code>);</code></div><div><code>        </code> </div><div><code>        </code><code>int</code> <code>size =</code> <code>10000</code><code>;</code></div><div><code>        </code><code>try</code><code>{</code></div><div><code>            </code><code>if</code><code>(</code><code>null</code> <code>!= list || list.size() &gt;</code> <code>0</code><code>){</code></div><div><code>                </code><code>for</code> <code>(</code><code>int</code> <code>i =</code> <code>0</code><code>, n = list.size(); i &lt; n; i++) {</code></div><div><code>                    </code><code>this</code><code>.delete(statementName, list.get(i));</code></div><div><code>                    </code><code>if</code> <code>(i %</code> <code>1000</code> <code>==</code> <code>0</code> <code>|| i == size -</code> <code>1</code><code>) {</code></div><div><code>                        </code><code>//手动每1000个一提交，提交后无法回滚</code></div><div><code>                        </code><code>session.commit();</code></div><div><code>                        </code><code>//清理缓存，防止溢出</code></div><div><code>                        </code><code>session.clearCache();</code></div><div><code>                    </code><code>}</code></div><div><code>                </code><code>}</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code><code>catch</code> <code>(Exception e){</code></div><div><code>            </code><code>session.rollback();</code></div><div><code>            </code><code>if</code> <code>(log4j.isDebugEnabled()) {</code></div><div><code>                </code><code>e.printStackTrace();</code></div><div><code>                </code><code>log4j.debug(</code><code>&quot;batchDelete error: id [&quot;</code> <code>+ statementName +</code> <code>&quot;], parameterObject [&quot;</code> <code>+ list +</code> <code>&quot;].  Cause: &quot;</code> <code>+ e.getMessage());</code></div><div><code>            </code><code>}</code></div><div><code>        </code><code>}</code> <code>finally</code> <code>{</code></div><div><code>            </code><code>session.close();</code></div><div><code>        </code><code>}</code></div><div><code>    </code><code>}</code></div><div><code>}</code></div></td></tr></tbody></table></div></div><div><h3><i>7. </i><i>[代码]</i>InfoUserMapper.xml     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56147#56147" name="56147" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div></td><td><div><code>&lt;?xml version=</code><code>&quot;1.0&quot;</code> <code>encoding=</code><code>&quot;UTF-8&quot;</code> <code>?&gt;</code></div><div><code>&lt;!DOCTYPE mapper PUBLIC</code> <code>&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</code> <code>&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</code> <code>&gt;</code></div><div><code>&lt;mapper namespace=</code><code>&quot;com.asgard.bms.business.mapper.InfoUser&quot;</code><code>&gt;</code></div><div><code>&lt;resultMap id=</code><code>&quot;infoUser&quot;</code> <code>type=</code><code>&quot;com.asgard.bms.business.model.InfoUser&quot;</code> <code>&gt;</code></div><div><code>    </code><code>&lt;id column=</code><code>&quot;ID&quot;</code> <code>property=</code><code>&quot;id&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;USERNAME&quot;</code> <code>property=</code><code>&quot;userName&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;PASSWORD&quot;</code> <code>property=</code><code>&quot;password&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;CREATE_USER&quot;</code> <code>property=</code><code>&quot;createUser&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;CREATE_DATE&quot;</code> <code>property=</code><code>&quot;createDate&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;IS_VALID&quot;</code> <code>property=</code><code>&quot;isValid&quot;</code> <code>jdbcType=</code><code>&quot;INTEGER&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;LATEST_OP_DATE&quot;</code> <code>property=</code><code>&quot;latestOpDate&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>    </code><code>&lt;result column=</code><code>&quot;LATEST_OP_USER&quot;</code> <code>property=</code><code>&quot;latestOpUser&quot;</code> <code>jdbcType=</code><code>&quot;VARCHAR&quot;</code> <code>/&gt;</code></div><div><code>&lt;/resultMap&gt;</code></div><div> </div><div> </div><div><code>&lt;select id=</code><code>&quot;queryByUserName&quot;</code> <code>parameterType=</code><code>&quot;com.asgard.bms.business.model.InfoUser&quot;</code> <code>resultMap=</code><code>&quot;infoUser&quot;</code><code>&gt;</code></div><div><code>    </code><code>SELECT * FROM INFO_USER IU</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;where&gt;</code></div><div><code>         </code><code>IU.IS_VALID=</code><code>1</code></div><div><code>        </code><code>&lt;</code><code>if</code> <code>test=</code><code>&quot;userName !=null and userName!=''&quot;</code><code>&gt;</code></div><div><code>            </code><code>AND IU.USERNAME=#{userName,jdbcType=VARCHAR}</code></div><div><code>        </code><code>&lt;/</code><code>if</code><code>&gt;</code></div><div><code>        </code><code>&lt;</code><code>if</code> <code>test=</code><code>&quot;password !=null and password!=''&quot;</code><code>&gt;</code></div><div><code>            </code><code>AND IU.PASSWORD=#{password,jdbcType=VARCHAR}</code></div><div><code>        </code><code>&lt;/</code><code>if</code><code>&gt;</code></div><div><code>    </code><code>&lt;/where&gt;</code></div><div><code>&lt;/select&gt;</code></div><div> </div><div> </div><div><code>&lt;insert id=</code><code>&quot;insertUser&quot;</code> <code>parameterType=</code><code>&quot;com.asgard.bms.business.model.InfoUser&quot;</code><code>&gt;</code></div><div><code>    </code><code>INSERT INTO INFO_USER(ID,USERNAME,PASSWORD,CREATE_USER,CREATE_DATE,IS_VALID)</code></div><div><code>            </code><code>VALUES(</code></div><div><code>                </code><code>#{id,jdbcType=VARCHAR},</code></div><div><code>                </code><code>#{userName,jdbcType=VARCHAR},</code></div><div><code>                </code><code>#{password,jdbcType=VARCHAR},</code></div><div><code>                </code><code>#{createUser,jdbcType=VARCHAR},</code></div><div><code>                </code><code>#{createDate,jdbcType=VARCHAR},</code></div><div><code>                </code><code>#{isValid,jdbcType=INTEGER}</code></div><div><code>            </code><code>);</code></div><div><code>&lt;/insert&gt;</code></div><div> </div><div><code>&lt;select id=</code><code>&quot;queryUserCount&quot;</code> <code>parameterType=</code><code>&quot;com.asgard.bms.business.model.InfoUser&quot;</code> <code>resultType=</code><code>&quot;int&quot;</code><code>&gt;</code></div><div><code>    </code><code>select count(</code><code>1</code><code>) from INFO_USER IU</code></div><div><code>     </code><code>&lt;where&gt;</code></div><div><code>         </code><code>IU.IS_VALID=</code><code>1</code></div><div><code>        </code><code>&lt;</code><code>if</code> <code>test=</code><code>&quot;userName !=null and userName!=''&quot;</code><code>&gt;</code></div><div><code>            </code><code>AND IU.USERNAME=#{userName,jdbcType=VARCHAR}</code></div><div><code>        </code><code>&lt;/</code><code>if</code><code>&gt;</code></div><div><code>        </code><code>&lt;</code><code>if</code> <code>test=</code><code>&quot;password !=null and password!=''&quot;</code><code>&gt;</code></div><div><code>            </code><code>AND IU.PASSWORD=#{password,jdbcType=VARCHAR}</code></div><div><code>        </code><code>&lt;/</code><code>if</code><code>&gt;</code></div><div><code>    </code><code>&lt;/where&gt;</code></div><div><code>&lt;/select&gt;</code></div><div> </div><div> </div><div><code>&lt;/mapper&gt;</code></div></td></tr></tbody></table></div></div><div><h3><i>8. </i><i>[代码]</i>LoginDao     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56148#56148" name="56148" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div></td><td><div><code>package</code> <code>com.asgard.bms.business.dao.impl;</code></div><div> </div><div><code>import</code> <code>java.util.List;</code></div><div> </div><div><code>import</code> <code>javax.annotation.Resource;</code></div><div> </div><div><code>import</code> <code>org.apache.ibatis.session.RowBounds;</code></div><div><code>import</code> <code>org.springframework.stereotype.Repository;</code></div><div> </div><div><code>import</code> <code>com.asgard.bms.business.base.BaseDAO;</code></div><div><code>import</code> <code>com.asgard.bms.business.dao.ILoginDao;</code></div><div><code>import</code> <code>com.asgard.bms.business.model.InfoUser;</code></div><div> </div><div><code>@Repository</code></div><div><code>public</code> <code>class</code> <code>LoginDao</code> <code>implements</code> <code>ILoginDao{</code></div><div> </div><div><code>    </code><code>private</code> <code>static</code> <code>final</code> <code>String NAMESPACE_INFOUSER =</code> <code>&quot;com.asgard.bms.business.mapper.InfoUser.&quot;</code><code>;</code></div><div><code>    </code><code>@Resource</code></div><div><code>    </code><code>private</code> <code>BaseDAO baseDAO;</code></div><div><code>    </code> </div><div><code>    </code><code>@Override</code></div><div><code>    </code><code>public</code> <code>InfoUser login(InfoUser user)</code> <code>throws</code> <code>Exception {</code></div><div><code>        </code><code>// TODO Auto-generated method stub</code></div><div><code>        </code><code>return</code> <code>this</code><code>.baseDAO.selectOne(NAMESPACE_INFOUSER+</code><code>&quot;queryByUserName&quot;</code><code>,user);</code></div><div><code>    </code><code>}</code></div><div> </div><div><code>    </code><code>/***</code></div><div><code>     </code><code>* 注册用户</code></div><div><code>     </code><code>*/</code></div><div><code>    </code><code>@Override</code></div><div><code>    </code><code>public</code> <code>int</code> <code>regirestUser(InfoUser infoUser) {</code></div><div><code>        </code><code>// TODO Auto-generated method stub</code></div><div><code>        </code><code>return</code> <code>baseDAO.insert(NAMESPACE_INFOUSER+</code><code>&quot;insertUser&quot;</code><code>, infoUser);</code></div><div><code>    </code><code>}</code></div><div><code>    </code><code>/***</code></div><div><code>     </code><code>* 测试分页功能</code></div><div><code>     </code><code>*/</code></div><div><code>    </code><code>@Override</code></div><div><code>    </code><code>public</code> <code>List&lt;InfoUser&gt; queryUserList(InfoUser infoUser,</code> <code>int</code> <code>pagenum,</code></div><div><code>            </code><code>int</code> <code>pagesize) {</code></div><div><code>        </code><code>RowBounds rowBounds =</code> <code>new</code> <code>RowBounds((pagenum-</code><code>1</code><code>)*pagesize, pagesize);</code></div><div><code>        </code><code>return</code> <code>baseDAO.selectList(NAMESPACE_INFOUSER+</code><code>&quot;queryByUserName&quot;</code><code>, infoUser,rowBounds);</code></div><div><code>    </code><code>}</code></div><div> </div><div><code>    </code><code>@Override</code></div><div><code>    </code><code>public</code> <code>int</code> <code>queryUserCount(InfoUser infoUser) {</code></div><div><code>        </code><code>// TODO Auto-generated method stub</code></div><div><code>        </code><code>return</code> <code>baseDAO.selectOne(NAMESPACE_INFOUSER+</code><code>&quot;queryUserCount&quot;</code><code>, infoUser);</code></div><div><code>    </code><code>}</code></div><div><code>    </code> </div><div><code>}</code></div></td></tr></tbody></table></div></div><div><h3><i>9. </i><i>[代码]</i>web.xml     <i><a>跳至</a> <a href="#56141">[1]</a> <a href="#56142">[2]</a> <a href="#56143">[3]</a> <a href="#56144">[4]</a> <a href="#56145">[5]</a> <a href="#56146">[6]</a> <a href="#56147">[7]</a> <a href="#56148">[8]</a> <a href="#56149">[9]</a> <a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56149#56149" name="56149" target="_blank">[全屏预览]</a></i></h3><div><div><a href="#">?</a></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div><div>73</div><div>74</div><div>75</div><div>76</div><div>77</div><div>78</div><div>79</div><div>80</div><div>81</div><div>82</div><div>83</div><div>84</div><div>85</div><div>86</div><div>87</div><div>88</div><div>89</div></td><td><div><code>&lt;?xml version=</code><code>&quot;1.0&quot;</code> <code>encoding=</code><code>&quot;UTF-8&quot;</code><code>?&gt;</code></div><div><code>&lt;web-app xmlns:xsi=</code><code>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</code></div><div><code>    </code><code>xmlns=</code><code>&quot;http://java.sun.com/xml/ns/javaee&quot;</code></div><div><code>    </code><code>xsi:schemaLocation=</code><code>&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</code></div><div><code>    </code><code>id=</code><code>&quot;WebApp_ID&quot;</code> <code>version=</code><code>&quot;2.5&quot;</code><code>&gt;</code></div><div><code>    </code><code>&lt;display-name&gt;buke_mybatis&lt;/display-name&gt;</code></div><div><code>    </code><code>&lt;welcome-file-list&gt;</code></div><div><code>        </code><code>&lt;welcome-file&gt;/WEB-INF/login.jsp&lt;/welcome-file&gt;</code></div><div><code>    </code><code>&lt;/welcome-file-list&gt;</code></div><div> </div><div><code>    </code> </div><div> </div><div><code>    </code><code>&lt;!-- 伪静态过滤器 --&gt;</code></div><div><code>    </code><code>&lt;filter&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;filter-</code><code>class</code><code>&gt;org.tuckey.web.filters.urlrewrite.UrlRewriteFilter&lt;/filter-</code><code>class</code><code>&gt;</code></div><div><code>    </code><code>&lt;/filter&gt;</code></div><div><code>    </code><code>&lt;filter-mapping&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;UrlRewriteFilter&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code></div><div><code>        </code><code>&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;</code></div><div><code>        </code><code>&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;</code></div><div><code>    </code><code>&lt;/filter-mapping&gt;</code></div><div><code>    </code> </div><div><code>    </code> </div><div><code>    </code><code>&lt;context-param&gt;</code></div><div><code>        </code><code>&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</code></div><div><code>        </code><code>&lt;param-value&gt;classpath:ApplicationContext.xml&lt;/param-value&gt;</code></div><div><code>    </code><code>&lt;/context-param&gt;</code></div><div><code>    </code><code>&lt;!-- 读取spring --&gt;</code></div><div><code>    </code><code>&lt;listener&gt;</code></div><div><code>        </code><code>&lt;listener-</code><code>class</code><code>&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-</code><code>class</code><code>&gt;</code></div><div><code>    </code><code>&lt;/listener&gt;</code></div><div><code>    </code><code>&lt;listener&gt;</code></div><div><code>        </code><code>&lt;listener-</code><code>class</code><code>&gt;org.springframework.web.context.request.RequestContextListener&lt;/listener-</code><code>class</code><code>&gt;</code></div><div><code>    </code><code>&lt;/listener&gt;</code></div><div><code>    </code><code>&lt;!-- 防止内存泄露，更好的处理内存 --&gt;</code></div><div><code>    </code><code>&lt;listener&gt;</code></div><div><code>        </code><code>&lt;listener-</code><code>class</code><code>&gt;org.springframework.web.util.IntrospectorCleanupListener&lt;/listener-</code><code>class</code><code>&gt;</code></div><div><code>    </code><code>&lt;/listener&gt;</code></div><div><code>    </code><code>&lt;!-- Spring 编码过滤器 --&gt;</code></div><div><code>    </code><code>&lt;filter&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;filter-</code><code>class</code><code>&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-</code><code>class</code><code>&gt;</code></div><div><code>        </code><code>&lt;init-param&gt;</code></div><div><code>            </code><code>&lt;param-name&gt;encoding&lt;/param-name&gt;</code></div><div><code>            </code><code>&lt;param-value&gt;UTF-</code><code>8</code><code>&lt;/param-value&gt;</code></div><div><code>        </code><code>&lt;/init-param&gt;</code></div><div><code>        </code><code>&lt;init-param&gt;</code></div><div><code>            </code><code>&lt;param-name&gt;forceEncoding&lt;/param-name&gt;</code></div><div><code>            </code><code>&lt;param-value&gt;</code><code>true</code><code>&lt;/param-value&gt;</code></div><div><code>        </code><code>&lt;/init-param&gt;</code></div><div><code>    </code><code>&lt;/filter&gt;</code></div><div><code>    </code><code>&lt;filter-mapping&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;encodingFilter&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code></div><div><code>    </code><code>&lt;/filter-mapping&gt;</code></div><div> </div><div> </div><div><code>&lt;!-- 配置Struts2 --&gt;</code></div><div><code>    </code><code>&lt;filter&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;struts2&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;filter-</code><code>class</code><code>&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-</code><code>class</code><code>&gt;</code></div><div><code>    </code><code>&lt;/filter&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;filter-mapping&gt;</code></div><div><code>        </code><code>&lt;filter-name&gt;struts2&lt;/filter-name&gt;</code></div><div><code>        </code><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code></div><div><code>        </code><code>&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;</code></div><div><code>        </code><code>&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;</code></div><div><code>    </code><code>&lt;/filter-mapping&gt;</code></div><div><code>    </code> </div><div><code>    </code><code>&lt;!-- 配置</code><code>404</code> <code>500</code><code>页面 --&gt;</code></div><div><code>    </code><code>&lt;error-page&gt;</code></div><div><code>        </code><code>&lt;error-code&gt;</code><code>404</code><code>&lt;/error-code&gt;</code></div><div><code>        </code><code>&lt;location&gt;/WEB-INF/jsp/</code><code>new</code><code>/error/404temp.jsp&lt;/location&gt;</code></div><div><code>    </code><code>&lt;/error-page&gt;</code></div><div><code>    </code><code>&lt;error-page&gt;</code></div><div><code>        </code><code>&lt;error-code&gt;</code><code>500</code><code>&lt;/error-code&gt;</code></div><div><code>        </code><code>&lt;location&gt;/WEB-INF/jsp/</code><code>new</code><code>/error/500temp.jsp&lt;/location&gt;</code></div><div><code>    </code><code>&lt;/error-page&gt;</code></div><div><code>    </code> </div><div><code>     </code> </div><div><code>    </code><code>&lt;session-config&gt; </code></div><div><code>        </code><code>&lt;session-timeout&gt;</code><code>120</code><code>&lt;/session-timeout&gt; </code></div><div><code>    </code><code>&lt;/session-config&gt;</code></div><div> </div><div> </div><div><code>&lt;/web-app&gt;</code></div></td></tr></tbody></table></div></div><div><h3><i>10. </i><i>[图片]</i> QQ截图20140812202845.png<a name="56152"></a>    </h3><div><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image.png" type="image/png" data-filename="Image.png" style="height: auto;"/></div></div><div><h3><i>11. </i><i>[文件]</i> buke_mybatis01.zip ~ 1MB     <a href="http://www.oschina.net/action/code/download?code=37996&amp;id=56162">下载</a><span style="font-weight:normal;font-size:8pt;">(986)</span>     <i><a href="http://www.oschina.net/code/piece_full?code=37996&amp;piece=56162#56162" name="56162" target="_blank">[全屏预览]</a></i></h3></div></div><div><a>举报</a></div><br/><br/><p style="margin:10px 0 0 0;font-weight:bold;color:#A00;text-decoration:none;">开源中国-程序员在线工具：<a href="http://git.oschina.net/" target="_blank">Git代码托管</a> <a href="http://tool.oschina.net/apidocs" style="text-decoration:none;">API文档大全(120+)</a> <a href="http://runjs.cn/" style="text-decoration:none;" target="_blank">JS在线编辑演示</a> <a href="http://tool.oschina.net/qr" style="text-decoration:none;" target="_blank">二维码</a> <a href="http://tool.oschina.net/" style="text-decoration:none;" target="_blank">更多»</a></p><div style="margin:10px 0 20px 5px;"><ins style="display:inline-block;width:728px;height:90px"><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"></ins></ins></ins></div><div><h2><a>相关的代码<em>(843)</em></a></h2><ul><li>0回/261阅 [Java] <a href="https://www.oschina.net/code/snippet_1538729_58758" target="_blank" title="JavaCV 随机获取视频中的某些帧的图片">JavaCV 随机获取视频中的某些帧的图片</a> 3个月前 By CoCo丶Hu</li><li>1回/365阅 [Java] <a href="https://www.oschina.net/code/snippet_2335754_58472" target="_blank" title="IDEA2016 注册码">IDEA2016 注册码</a> 4个月前 By zhangguangyong</li><li>0回/221阅 [Java] <a href="https://www.oschina.net/code/snippet_574036_58400" target="_blank" title="常用字符串处理">常用字符串处理</a> 4个月前 By 驛路梨花醉美</li><li>0回/295阅 [Java] <a href="https://www.oschina.net/code/snippet_574036_58396" target="_blank" title="身份证常用工具类">身份证常用工具类</a> 4个月前 By 驛路梨花醉美</li><li>0回/132阅 [Java] <a href="https://www.oschina.net/code/snippet_574036_58394" target="_blank" title="常用字符转码">常用字符转码</a> 4个月前 By 驛路梨花醉美</li><li>0回/342阅 [Java] <a href="https://www.oschina.net/code/snippet_128625_58201" target="_blank" title="itextpdf之html转PDF">itextpdf之html转PDF</a> 4个月前 By 匆匆里</li><li>0回/323阅 [Java] <a href="https://www.oschina.net/code/snippet_2688496_58115" target="_blank" title="Spring 框架下的junit4 单元测试代码编写">Spring 框架下的junit4 单元测试代码编写</a> 4个月前 By 00fly</li><li>0回/148阅 [Java] <a href="https://www.oschina.net/code/snippet_1379199_57803" target="_blank" title="fast json">fast json</a> 5个月前 By 拉普兰德</li><li>0回/106阅 [Java] <a href="https://www.oschina.net/code/snippet_731762_57527" target="_blank" title="使用Jsoup获取列表网公司名称">使用Jsoup获取列表网公司名称</a> 5个月前 By MiniBu</li><li>0回/156阅 [Java] <a href="https://www.oschina.net/code/snippet_2307176_57412" target="_blank" title="将javabean转化为map对象">将javabean转化为map对象</a> 5个月前 By zengjiaqwe</li></ul><a href="http://www.oschina.net/code/list_releted_codes?id=37996">显示所有 »</a></div><div><h2><a href="#commentform">发表评论</a> <a href="#">回到顶部</a> <a name="comments">网友评论<em>(30)</em></a></h2><div><ul><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/turionboy" name="rpl_1868"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>1楼：<b>王金豆</b> 发表于 2014-08-12 22:56 <a>回复此评论</a></div><div>楼主直接把工程放上来多好</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/tjzx" name="rpl_9102"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>2楼：<b>天爵在线</b> 发表于 2014-08-13 08:58 <a>回复此评论</a></div><div><div><h4>引用来自“王金豆”的评论</h4>
楼主直接把工程放上来多好</div>
+1024</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/lanzp" name="rpl_9631"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [3].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>3楼：<b>loki_lan</b> 发表于 2014-08-13 09:43 <a>回复此评论</a></div><div>好长一坨。</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_10235"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [4].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>4楼：<b>土豆-地瓜</b> 发表于 2014-08-13 10:33 <a>回复此评论</a></div><div><div><h4>引用来自“loki_lan”的评论</h4>
好长一坨。</div>
工程放上去了，其实就需要两个配置文件就可以了，为了明确一些，所以就写的那么多了</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/edsondi" name="rpl_12620"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [1].png" type="image/png" data-filename="Image.png" align="middle" style="height: auto;"/></a></td><td><div>5楼：<b>Nanke</b> 发表于 2014-08-13 13:52 <a>回复此评论</a></div><div>Jfianl吧！SpringMVC 适合做企业模块话的东西，但是jfianl 会很简单</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/euray" name="rpl_12696"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [5].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>6楼：<b>Euray</b> 发表于 2014-08-13 13:58 <a>回复此评论</a></div><div>看着挺清晰的。不错</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/euray" name="rpl_12698"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [6].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>7楼：<b>Euray</b> 发表于 2014-08-13 13:58 <a>回复此评论</a></div><div>看着挺清晰的。不错</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_16989"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [7].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>8楼：<b>土豆-地瓜</b> 发表于 2014-08-13 19:56 <a>回复此评论</a></div><div><div><h4>引用来自“Euray”的评论</h4>
看着挺清晰的。不错</div>
谢谢，会更加努力的</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_16994"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [8].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>9楼：<b>土豆-地瓜</b> 发表于 2014-08-13 19:56 <a>回复此评论</a></div><div><div><h4>引用来自“Edsondi”的评论</h4>
Jfianl吧！SpringMVC 适合做企业模块话的东西，但是jfianl 会很简单</div>
这个还没用过，求教程</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/bddiudiu" name="rpl_31603"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [9].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>10楼：<b>阿丢丢</b> 发表于 2014-08-14 16:14 <a>回复此评论</a></div><div>原来mybaits打印SQL语句是这样写的... 哎... 学习了... 好棒... </div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/nextsoft" name="rpl_45859"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [10].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>11楼：<b>浪子一号</b> 发表于 2014-08-15 12:02 <a>回复此评论</a></div><div>好东西啊 ！很多人开发了很多年，估计搭建个环境的能力都没有的</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/u/221256" name="rpl_46508"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [11].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>12楼：<b>TeamBack</b> 发表于 2014-08-15 12:56 <a>回复此评论</a></div><div><div><h4>引用来自“Edsondi”的评论</h4>
Jfianl吧！SpringMVC 适合做企业模块话的东西，但是jfianl 会很简单</div>
看个人熟悉程度，两者都是新手感觉jfianl挺好，假如spring用的很熟练，感觉也没必要非要用这个，</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/u/244693" name="rpl_47355"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [12].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>13楼：<b>亻紫菜彡</b> 发表于 2014-08-15 14:06 <a>回复此评论</a></div><div>楼主可以看看mybatis的批量操作，&lt;foreach&gt;标签</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_47444"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [13].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>14楼：<b>土豆-地瓜</b> 发表于 2014-08-15 14:14 <a>回复此评论</a></div><div><div><h4>引用来自“亻紫菜彡”的评论</h4>
楼主可以看看mybatis的批量操作，&lt;foreach&gt;标签</div>
好的，这个我用过，批量删除的那种，传递过来的是一个集合</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/u/1781237" name="rpl_49398"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [14].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>15楼：<b>yahee</b> 发表于 2014-08-15 16:56 <a>回复此评论</a></div><div>有种方式，不用写daoImpl.写好接口就行。</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_50673"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [15].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>16楼：<b>土豆-地瓜</b> 发表于 2014-08-15 18:43 <a>回复此评论</a></div><div><div><h4>引用来自“yahee”的评论</h4>
有种方式，不用写daoImpl.写好接口就行。</div>
恩，如果是公用的，可以直接抽象dao和service，特殊的方法处理，可以写自己的dao和service实现</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/u/943305" name="rpl_86387"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [16].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>17楼：<b>程序猿_哲</b> 发表于 2014-08-17 20:19 <a>回复此评论</a></div><div>很不错的东东，基础的框架都搭建起来了，baseDao的封装也很好，不过应该把读写分离考虑上</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/aps" name="rpl_88082"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [17].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>18楼：<b>土豆-地瓜</b> 发表于 2014-08-17 22:40 <a>回复此评论</a></div><div><div><h4>引用来自“邢哲”的评论</h4>
很不错的东东，基础的框架都搭建起来了，baseDao的封装也很好，不过应该把读写分离考虑上</div>
求指教</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/u/1385723" name="rpl_95382"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [2].png" type="image/png" data-filename="Image.png" align="middle" style="height: auto;"/></a></td><td><div>19楼：<b>Left-Shift</b> 发表于 2014-08-18 08:48 <a>回复此评论</a></div><div>挺好</div></td></tr></tbody></table></li><li><table width="100%"><tbody><tr><td><a href="https://my.oschina.net/imba" name="rpl_95680"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image [18].jpg" type="image/jpeg" data-filename="Image.jpg" align="middle" style="height: auto;"/></a></td><td><div>20楼：<b>你跪了少年</b> 发表于 2014-08-18 09:13 <a>回复此评论</a></div><div>一句话，就实现你的功能：<br/>
&lt;!-- 自动扫描entity目录, 省掉mybatisConfig.xml里的别名手工配置 --&gt;<br/>
        &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.test.model.entity&quot; /&gt;<br/></div></td></tr></tbody></table></li></ul><ul><li><a href="http://www.oschina.net/code/snippet_733736_37996?p=1">1</a></li><li><a href="http://www.oschina.net/code/snippet_733736_37996?p=2#comments">2</a></li><li><a href="http://www.oschina.net/code/snippet_733736_37996?p=2#comments">&gt;</a></li></ul></div></div><div style="margin:0;"><a name="commentform"></a><table><tbody><tr><td></td></tr><tr><td></td></tr><tr><td></td></tr></tbody></table><a href="#">回到顶部</a>   <a href="#comments">回到评论列表</a></div></div><div>开源从代码分享开始 <a href="http://www.oschina.net/code/step1">分享代码</a></div><div><strong><em>土豆-地瓜</em>的其它代码</strong><ul><li><a href="https://www.oschina.net/code/snippet_733736_45860" title="整合layer，完美弹出层实现">整合layer，完美弹出层实现</a>(7评/26977阅,2年前)</li><li><a href="https://www.oschina.net/code/snippet_733736_45639" title="url参数拦截，防止注入html和js代码">url参数拦截，防止注入html和js代码</a>(4评/2913阅,2年前)</li><li><a href="https://www.oschina.net/code/snippet_733736_45633" title="node js 高阶函数，排序">node js 高阶函数，排序</a>(3评/462阅,2年前)</li><li><a href="https://www.oschina.net/code/snippet_733736_45623" title="nodejs fs 模块的用途">nodejs fs 模块的用途</a>(3评/2480阅,2年前)</li><li><a href="https://www.oschina.net/code/snippet_733736_45511" title="上传excel，excel插入至数据库">上传excel，excel插入至数据库</a>(2评/2247阅,2年前)</li></ul><a href="http://www.oschina.net/code/list_by_user?id=733736">全部(30)...</a></div><div style="display:none;"><div style="padding-left:0px;"><table><tbody><tr><td>邮箱或帐号：登录密码：还没帐号呢，<a href="http://www.oschina.net/home/reg" target="_blank">现在注册一个？</a></td></tr><tr><td></td></tr><tr><td></td></tr><tr><td></td></tr></tbody></table></div></div><div><table width="100%"><tbody><tr><td align="left">© 开源中国(OSChina.NET) | <a href="https://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:market@oschina.cn">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href="http://www.miitbeian.gov.cn/" style="color:#737573;text-decoration:none;" target="_blank">粤ICP备12009483号-3</a></td><td>开源中国手机客户端： <a href="http://www.oschina.net/app" title="Android客户端">Android</a> <a href="http://www.oschina.net/app" title="iPhone 客户端">iPhone</a> <a href="http://www.oschina.net/app" title="Windows Phone 客户端">WP7</a></td></tr><tr><td align="left" colspan="2">开源中国社区(OSChina.net)是工信部 <a href="http://www.copu.org.cn/" target="_blank">开源软件推进联盟</a> 指定的官方社区</td></tr></tbody></table></div><div style="position: fixed; bottom: 120px; right: 100px; cursor: pointer; display: none;" title="回到顶部"><img src="spring和mybatis的高效率整合。不用写别名。 - 开源中国社区.html_files/Image.gif" type="image/gif" data-filename="Image.gif" style="width: 31px; height: auto;"/></div><div style="height:36px;font-size:12px;width:autopx;display:none;"><div>分享到：<a href="#"></a><a href="#"></a><a href="#"></a><a href="#"></a><a href="#"></a><a href="#"></a></div></div></span>
</div></body></html> 