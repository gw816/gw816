<html>
<head>
  <title>Liferay 6.1开发学习（三）：Portlet简述 - IT人生录.html</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="567"/>
<h1>Liferay 6.1开发学习（三）：Portlet简述 - IT人生录.html</h1>

<div>
<span><p>在上一篇文章里面介绍的那个Portlet是在创建工程时默认创建的Portlet页面，可以对Portlet有一个大概的认识，但是很难全面。本篇文章对于Liferay中基于MVC的Portlet创建做一个相对详细的描述。</p><h1>一、Portlet是什么？</h1><p>Portlet是基于java的web组件，由portlet容器管理，并由容器处理请求，生产动态内容。Portals使用portlets作为可插拔用户接口组件，提供信息系统的表示层。作为利用servlets进行web应用编程的下一步，portlets实现了web应用的模块化和用户中心化。 portlet规范，即jsr（Java Standardization Request ）168/268，是为了实现portal和portlet的互操作。它定义了portlet和portlet容器之间的和约，让portlet实现个性化、表示和安全的api集。规范还定义了怎样在portlets应用中打包portlets。（引自百度百科：<a href="http://baike.baidu.com/view/58961.htm" title="Portlet">http://baike.baidu.com/view/58961.htm</a>）</p><p>Liferay是portlet规范的实现，对于portlet规范实现的主流产品还有IBM、Oracle等的Portal产品，主流产品的详细可以参看：<a href="http://www.huqiwen.com/2012/06/11/what-is-liferay/" title="Liferay是什么">http://www.huqiwen.com/2012/06/11/what-is-liferay/</a> 此篇文章中关于Liferay市场地位处的图片。很以很多时候我们将Liferay称为一个Portal容器，也就是一个提供Portlet运行的环境。</p><h1>二、创建一个Portlet</h1><p>1、基于上一节的Study这个portlet工程的基础。点击Liferay IDE上的liferay工具栏，有三个按钮，点击中间按钮，New Liferay Portlet。如下图，点击下一步。</p><p><a href="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-demo.png" rel="example_group"><img alt="liferay-portlet-demo" height="206" src="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-demo.png" style="display: block;" title="new-liferay-portlet-demo" width="566"></img></a></p><img alt="liferay-portlet-demo" height="206" src="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-demo.png" title="new-liferay-portlet-demo" width="566"></img><p><strong>Portlet plugin project:</strong>这里选择要创建的portlet属于哪个插件工程。</p><p><strong>Source folder:</strong>类的放置位置，一般默认。</p><p><strong>Portlet Class:</strong>要创建的Portlet的控制类的名称，可以将此类看作Struts中的Action类。</p><p><strong>Java package:</strong>包名。</p><p><strong>Superclass:</strong>选择要继承哪个类。一般默认，也就是MVCPortlet。下面这几个类的关系如下：MVCPortlet是LiferayPortlet的子类，LiferayPortlet是GenericPortlet的子类。在MVCPortlet中封装了一些方便开发的方法，所以一般使用MVCPortlet，如果有特殊需求可以使用他们的父类。</p><p>2、在此步骤看到的是Portlet的相关信息，如模式，JSP位置等，此步骤是portlet.xml文件的可视化编辑，此步骤的所有选项都可以通过编辑portlet.xml完成。点击下一步。</p><p><a href="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-info.png" rel="example_group"><img alt="创建portlet的信息页" height="361" src="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-info.png" style="display: block;" title="new-liferay-portlet-info" width="576"></img></a></p><img alt="创建portlet的信息页" height="361" src="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-info.png" title="new-liferay-portlet-info" width="576"></img><p><strong>Porltet Info:</strong>这里显示的是Porltet的名称，显示名称，标题等。一般默认，不需要修改。</p><p><strong>Portlet Modes</strong>:这里是portlet的模式，View、Edit、Help这三种模式，是portlet规范里面定义的。</p><p><strong>Liferay Portlet Modes:</strong>看名知义，Liferay Portlet模式。一般默认即可。Portlet默认的三种模式，Liferay认为不能满足实际的需求，所以又新增了这几种模式。如果选择多个模式，就可以在portlet的设置里面看到，可以通过设置进行切换，方便进行一些特殊需求，如：config可以用来开发可配置Porltet，管理员可以为指定的Portlet定制相关的参数等。</p><p><strong>JSP folder:</strong>JSP的存放位置，一般默认的命名是html/porltet名称，一般默认即可。html是相对于docroot的，完整路径是docroot/html/demo/view.jsp。</p><p><strong>Create resource bundle file</strong>:绑定资源文件，主要是国际化。如果想要porltet的名称是中文的，测必须使用资源文件，liferay推荐工程中的所有文字描述类的内容都使用资源文件来定义，这样方便国际化，也能避免出现一些可能的乱码问题。这里先不选，后面详讲国际化。</p><p>3、此步骤是Liferay-portlet.xml和liferay-display.xml的可视化编辑。点击完成即可。</p><p><a href="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-liferay-portlet-info.png" rel="example_group"><img alt="liferay-portlet信息" height="238" src="http://www.huqiwen.com/wp-content/themes/Ality/img/loading.gif" title="new-liferay-portlet-liferay-portlet-info" width="566"></img></a></p><img alt="liferay-portlet信息" height="238" src="http://www.huqiwen.com/wp-content/uploads/2012/09/new-liferay-portlet-liferay-portlet-info.png" title="new-liferay-portlet-liferay-portlet-info" width="566"></img><p><strong>Icon</strong>:此portlet的图标。</p><p><strong>Allow mutiple instaces</strong>:是否允许在同一个页面中有多个porltet的实例，默认为否。</p><p><strong>CSS</strong>：当前porltet的自定义CSS。一般默认。</p><p><strong>JavaScript:</strong>当前portlet自定义JS。一般默认。</p><p><strong>CSS classname:</strong>当前portlet的命名空间，防止CSS和其他porltet冲突。</p><p><strong>Category</strong>:当前的portlet，显示在哪个分类下面，这里是Liferay-display.xml文件的可视化编辑。</p><h1>三、MVCPortlet的简单使用</h1><p>可以看到在工程的com.huqiwen.study包下面生成了一个Demo的java文件，如果只是让portlet显示/html/demo/view.jsp里面的内容，则不需要在Demo.java文件里面添加内容。如果需要让view.jsp后从台初始化一些信息，则需要重写doView文法。view模式显示时调用doView方法，edite模式显示时调用doEdite方法，config模式显示时调用doConfig方法，依此类推。</p><p>在此大部分情况下可以将renderRequest当然HttpServletRequest使用。如果要转换可以通过PortalUtil.getHttpServletResponse(portletResponse)来进行转换。</p><p>可以使用renderRequest.setAttribute(arg0, arg1)方法，在前台页面通过JSTL等进行取值。</p><p>这里不详述，和普通的WEB程序基本一样。</p><h1>四、其他</h1><p>在二里面创建的内容都可以通过修改portlet.xml，liferay-portlet.xml，liferay-display.xml等来进行修改调整。创建向导包含的只是一些最通用的内容，一些高级的参数还需要通过修改porltet.xml和liferay-portlet.xml来完成。</p><p>通过向导默认porltet的view展现的JSP命名为view.jsp。此名称可以在docroot下面修改成相应的内容，实际开发中建议命名中和业务相关的，方便后期查找识别，如用户的可以命名成userView等，修改名称的同时需要修改Porltet.xml里面init-param对应的名称，否则会出现找不到页面的情况。</p><div style="float:left"><div><span>分享到：</span> <a title="分享到QQ空间"><span>QQ空间</span></a> <a title="分享到新浪微博"><span>新浪微博</span></a> <a title="分享到腾讯微博"><span>腾讯微博</span></a> <a title="分享到人人网"><span>人人网</span></a> <a href="http://www.jiathis.com/share?uid=1591187" target="_blank">更多</a> <a><span title="累计分享16次">16</span></a></div>  </div><div style="margin: 0; border: none; padding: 0; clear: both; overflow: hidden; *zoom: 1; *position: relative;"><div style="padding: 0; margin: 0; border: none; clear: both; display: block;"><div style="font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:16px;margin: 0; border: none; padding: 10px 0 5px 5px; _padding-top:10px; text-indent: 0; text-align: left; font-weight: bold;color:#333333;">您可能喜欢：</div><div style="clear: both; border: none; margin: 0 0 0 -1px; padding: 0; overflow: hidden; _zoom: 1;"><a href="http://www.huqiwen.com/2014/10/09/liferay-6-study-30-portlet-url-invocation/" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 102px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" title="Liferay 6开发学习（三十）：跨页面Portlet之间的调用与数据传递"></a><img src="http://img.ujian.cc/nice/44.jpg" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); left: 8px; top: 8px;"></img><div style="color:#333333;height:60px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">Liferay 6开发学习（三十）：跨页面Portlet之间的调用与数据传递</div><a href="http://www.huqiwen.com/2013/12/20/let-liferay-portlet-borders-disappear/" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 102px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" title="Liferay中让portlet不显示边框"></a><img src="http://img.ujian.cc/nice/35.jpg" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); left: 8px; top: 8px;"></img><div style="color:#333333;height:60px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">Liferay中让portlet不显示边框</div><a href="http://www.huqiwen.com/2014/01/13/liferay-6-study-24-development-mode-overview/" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 102px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" title="Liferay 6开发学习（二十四）：Liferay开发模式介绍"></a><img src="http://img.ujian.cc/nice/27.jpg" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); left: 8px; top: 8px;"></img><div style="color:#333333;height:60px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">Liferay 6开发学习（二十四）：Liferay开发模式介绍</div><a href="http://www.huqiwen.com/?p=227" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 102px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" title="liferay"></a><img src="http://img.ujian.cc/201507/211/4e1/mini_0e1998773e152f58354d_120_120.jpg" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); left: 8px; top: 8px;"></img><div style="color:#333333;height:60px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">liferay</div><a href="http://www.daling.com/?utm_source=youjian&amp;utm_medium=cpc&amp;utm_campaign=youjian0007&amp;bdsrc=youjian_7" style="display: block; height: auto; float: left; text-decoration: none; border-bottom: none; cursor: pointer; position: relative; margin: 5px 0; padding: 5px 5px; width: 102px; text-align: left; outline: none; background-image: none; border-left: 1px solid #dddddd !important;color:#333333;overflow:hidden;" target="_blank" title="达令 11.11开始了，零食满199减100"></a><img src="http://img.ujian.cc/201511/098/735/mini_143bcd5663cb4a169383_120_120.jpg" style="position: absolute;border-radius:5px;border: medium none; background: none repeat scroll 0% 0% transparent; visibility: visible; padding: 0pt; margin: 0pt; width: 96px; height: 96px; clip: rect(0px, 96px, 96px, 0px); left: 8px; top: 8px;"></img><div style="color:#333333;height:60px; width: 100%; margin: 3px 2px 0 2px; padding: 0; text-indent: 0; border: none;overflow: hidden;font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;line-height:15px;">达令 11.11开始了，零食满199减100</div></div><div style="margin: 0pt; border: medium none; padding: 5px 8px; clear: both; text-align: right;"><a href="http://www.ujian.cc/index2" style="font-family:'Helvetica Neue',helvetica,arial,sans-serif;font-size:12px;text-decoration:none;color:#999; border-bottom: medium none; word-wrap: normal; display: inline;" target="_blank" title="这是什么工具？">友荐[?]</a></div></div></div></span>
</div></body></html> 